{% extends "base.html" %}
{% load static %}
{% block content %}
  <script type="text/javascript"
          src="{% static 'js/add_ingredients_and_steps.js' %}"></script>
  <br>
  <h1>Add recipe</h1>
  <br>
  {% if user.is_authenticated %}
    <div class="form-group">
      <form class="row g-3"
            method="POST"
            enctype="multipart/form-data"
            onsubmit="return getAllData()">
        {% csrf_token %}
        {{ recipe_form.media }}
        <div class="col-md-4">
          <label for="id_title" class="form-label">Title:</label>
          {{ recipe_form.title }}
        </div>
        <div class="col-md-4">
          <label for="id_snippet" class="form-label">Snippet:</label>
          {{ recipe_form.snippet }}
        </div>
        <div class="col-md-4">
          <label for="author " class="form-label">Author:</label>
          {{ recipe_form.author }}
        </div>
        <div class="col-md-3">
          <label for="category" class="form-label">Category:</label>
          {{ recipe_form.category }}
        </div>
        <div class="col-md-3">
          <label for="prep_time" class="form-label">Prep Time:</label>
          {{ recipe_form.prep_time }}
        </div>
        <div class="col-md-3">
          <label for="cook_time" class="form-label">Cook Time:</label>
          {{ recipe_form.cook_time }}
        </div>
        <div class="col-md-3">
          <label for="proof_time" class="form-label">Proof Time:</label>
          {{ recipe_form.proof_time }}
        </div>
        <div class="col-md-3">
          <label for="serves" class="form-label">Serves:</label>
          {{ recipe_form.serves }}
        </div>
        <div class="col-md-4">
          <label for="image" class="form-label">Image:</label>
          <br>
          {{ recipe_form.image }}
        </div>
        <div class="col-md-12">
          <label for="story_time" class="form-label">Story:</label>
          <br>
          {{ recipe_form.story_time }}
        </div>
        <div class="col-md-12">
          <div class="row g-1">
            <div class="col">
              <div class="row g-1">
                <label for="id_ingredient" class="form-label">Add Ingredient:</label>
                <div class="col">
                  <input id="ingredient" class="form-control" type="text" name="ingredient" />
                </div>
                <div class="col">
                  <input class="btn btn-primary"
                         value="Add another ingredient"
                         onclick="addValue('ingredientTbl', 'ingredient');" />
                </div>
              </div>
              <br>
              <table id="ingredientTbl">
                <tbody>
                  <tr>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col">
              <div class="row g-1">
                <label for="id_steps" class="form-label">Add Step:</label>
                <div class="col">
                  <input id="steps" class="form-control" type="text" name="steps" />
                </div>
                <div class="col">
                  <input class="btn btn-primary"
                         value="Add another step"
                         onclick="addValue('stepsTbl', 'steps');" />
                </div>
              </div>
              <br>
              <table id="stepsTbl">
                <tbody>
                  <tr>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <input type="hidden" id="final_ingredients" name="ingredients" />
        <input type="hidden" id="final_steps" name="steps" />
        <button class="form-control btn btn-primary">Add</button>
      </form>
      <script>
      var name = "{{ user.id }}";
      document.getElementById("author").value = name;
      </script>
      <p>{{ name }}</p>
    </div>
  {% else %}
    <h1>Please login to add post</h1>
  {% endif %}
{% endblock %}
